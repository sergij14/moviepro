{"version":3,"sources":["js/index.js"],"names":["apiUrl","imgPath","searchUrl","dramaMoviesUrl","highGrossUrl","nav","document","querySelector","searchForm","searchInput","popMovies","dramaMovies","highGrossMovies","moviesContainer","moviesTitle","search","searchBtn","searchBtnIcon","hamBtn","hamBtnIcon","menu","menuLinks","querySelectorAll","favItemsContainer","favBtn","favBtnIcon","favItems","showSearch","classList","toggle","showNav","outSideClick","event","contains","target","closest","showFav","addEventListener","forEach","link","remove","getMovies","url","fetch","resp","json","data","movies","results","renderMovies","length","Error","textContent","insertAdjacentHTML","innerHTML","map","movie","image","poster_path","title","vote","vote_average","date","release_date","id","backdrop_path","genre_ids","overview","checkColor","clickCheck","btnCheck","loadMsg","item","dataset","window","scroll","getClickedMovie","btn","toString","setAttribute","includes","push","fetchFavItem","addToStorage","renderClickedMovie","removeAttribute","localStorage","setItem","getFavItems","favItemsLC","getItem","split","renderFavItem","favClickCheck","clickedItem","parentElement","filter","setTimeout","parentNode","removeChild","firstElementChild","plot","runtime","imdbID","imdb_id","genres","getGenres","genreslist","genre","name","join","preventDefault","searchTerm","value","blur","location","reload"],"mappings":"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","file":"js.638c9a60.js","sourceRoot":"..","sourcesContent":["//\r\n// Author: Sergi. J\r\n//\r\n\r\n\"use strict\";\r\n\r\n// import \"regenerator-runtime/runtime\";\r\n// import \"core-js/stable\";\r\n\r\n////////////////////////////////////////////////////////\r\n// API Urls\r\n////////////////////////////////////////////////////////\r\nconst apiUrl =\r\n  \"https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=53d1126a0f1a18cf2551da1519c821af&page=1\";\r\nconst imgPath = \"https://image.tmdb.org/t/p/w500\";\r\nconst searchUrl =\r\n  \"https://api.themoviedb.org/3/search/movie?api_key=53d1126a0f1a18cf2551da1519c821af&query=\";\r\nconst dramaMoviesUrl =\r\n  \"https://api.themoviedb.org/3/discover/movie?with_genres=18&sort_by=popularity.desc&api_key=53d1126a0f1a18cf2551da1519c821af&page=1\";\r\nconst highGrossUrl =\r\n  \"https://api.themoviedb.org/3/discover/movie?certification_country=US&certification=R&sort_by=revenue.desc&api_key=53d1126a0f1a18cf2551da1519c821af&page=1\";\r\n\r\n////////////////////////////////////////////////////////\r\n// Selecting Elements\r\n////////////////////////////////////////////////////////\r\nconst nav = document.querySelector(\".nav\");\r\n\r\nconst searchForm = document.querySelector(\".nav__search__form\");\r\nconst searchInput = document.querySelector(\".nav__search__input\");\r\n\r\nconst popMovies = document.querySelector(\"#pop-movies\");\r\nconst dramaMovies = document.querySelector(\"#drama-movies\");\r\nconst highGrossMovies = document.querySelector(\"#high-gross-movies\");\r\n\r\nconst moviesContainer = document.querySelector(\".movies\");\r\nconst moviesTitle = document.querySelector(\".movies-title\");\r\n\r\nconst search = document.querySelector(\".nav__search\");\r\nconst searchBtn = document.querySelector(\".nav__search-btn button\");\r\nconst searchBtnIcon = document.querySelector(\".nav__search-btn button i\");\r\n\r\nconst hamBtn = document.querySelector(\".nav__ham-btn button\");\r\nconst hamBtnIcon = document.querySelector(\".nav__ham-btn button i\");\r\nconst menu = document.querySelector(\".nav__menu\");\r\nconst menuLinks = document.querySelectorAll(\".nav__menu a\");\r\n\r\nconst favItemsContainer = document.querySelector(\".favorites__container\");\r\n\r\nconst favBtn = document.querySelector(\".favorites__btn button\");\r\nconst favBtnIcon = document.querySelector(\".favorites__btn button i\");\r\n\r\nlet favItems = [];\r\n\r\n////////////////////////////////////////////////////////\r\n// Navigation & Search Form\r\n////////////////////////////////////////////////////////\r\n\r\nconst showSearch = function () {\r\n  search.classList.toggle(\"nav__search--show\");\r\n  searchBtnIcon.classList.toggle(\"fa-times\");\r\n  favBtn.classList.toggle(\"favorites__btn--passive\");\r\n};\r\n\r\nconst showNav = function () {\r\n  menu.classList.toggle(\"nav__menu--show\");\r\n  hamBtnIcon.classList.toggle(\"fa-times\");\r\n  favBtn.classList.toggle(\"favorites__btn--passive\");\r\n};\r\n\r\nconst outSideClick = function (event) {\r\n  if (\r\n    menu.classList.contains(\"nav__menu--show\") &&\r\n    !hamBtn.contains(event.target) &&\r\n    !event.target.closest(\".nav__menu\")\r\n  ) {\r\n    showNav();\r\n  } else if (\r\n    search.classList.contains(\"nav__search--show\") &&\r\n    !searchBtn.contains(event.target) &&\r\n    !searchInput.contains(event.target) &&\r\n    !event.target.closest(\".nav__search\")\r\n  ) {\r\n    showSearch();\r\n  } else if (\r\n    favItemsContainer.classList.contains(\"favorites__container--show\") &&\r\n    !favBtn.contains(event.target) &&\r\n    !event.target.closest(\".favorites__container\") &&\r\n    !event.target.classList.contains(\"movies__item__fav\")\r\n  ) {\r\n    showFav();\r\n  } else if (favItemsContainer.classList.contains(\"fav-show\")) {\r\n    showFav();\r\n  }\r\n};\r\n\r\nsearchBtn.addEventListener(\"click\", showSearch);\r\nhamBtn.addEventListener(\"click\", showNav);\r\nmenuLinks.forEach((link) => link.addEventListener(\"click\", showNav));\r\ndocument.addEventListener(\"click\", outSideClick);\r\n\r\n////////////////////////////////////////////////////////\r\n// Fav Items\r\n////////////////////////////////////////////////////////\r\n\r\nconst showFav = function () {\r\n  favItemsContainer.classList.toggle(\"favorites__container--show\");\r\n  favBtnIcon.classList.toggle(\"fa-times\");\r\n  favItemsContainer.classList.remove(\"fav-show\");\r\n};\r\n\r\nfavBtn.addEventListener(\"click\", showFav);\r\n\r\n////////////////////////////////////////////////////////\r\n// Getting Movies\r\n////////////////////////////////////////////////////////\r\n\r\nconst getMovies = async function (url) {\r\n  try {\r\n    const resp = await fetch(url);\r\n    const data = await resp.json();\r\n    const movies = data.results;\r\n    renderMovies(movies);\r\n    if (!movies.length > 0) throw new Error(\"Nothing Found\");\r\n  } catch (error) {\r\n    moviesTitle.textContent = error;\r\n    moviesContainer.insertAdjacentHTML(\r\n      \"beforeend\",\r\n      `<a class=\"btn-home\" href=\"./\">Main Page</a>`\r\n    );\r\n  }\r\n};\r\n\r\n////////////////////////////////////////////////////////\r\n// Rendering Movies\r\n////////////////////////////////////////////////////////\r\n\r\nconst renderMovies = function (movies) {\r\n  moviesContainer.innerHTML = \"\";\r\n  movies.map((movie) => {\r\n    const image = movie.poster_path;\r\n    const title = movie.title;\r\n    const vote = movie.vote_average;\r\n    const date = movie.release_date;\r\n    const id = movie.id;\r\n\r\n    if (\r\n      movie.backdrop_path !== null &&\r\n      movie.genre_ids !== [] &&\r\n      movie.overview !== \"\"\r\n    ) {\r\n      moviesContainer.insertAdjacentHTML(\r\n        \"beforeend\",\r\n        `\r\n        <div class=\"movies__item\" data-id=\"${id}\">\r\n        <h6 class=\"movies__item__title\">${title}</h6>\r\n         <div class=\"movies__item__img-container\">\r\n         <img class=\"movies__item__img\" src=\"${imgPath + image}\" />\r\n         <button class=\"movies__item__fav\" data-id=\"${id}\">\r\n         Add To Favorites\r\n         </button>\r\n         </div>\r\n        <div class=\"movies__item__details\">\r\n        <span class=\"movies__item__date\">${date}</span>\r\n        <span class=\"movies__item__vote\" style=\"color:${checkColor(vote)}\">\r\n        ${vote}\r\n        </span>\r\n\r\n        </div>\r\n        </div>\r\n         `\r\n      );\r\n    }\r\n  });\r\n  clickCheck();\r\n  btnCheck();\r\n};\r\n\r\n////////////////////////////////////////////////////////\r\n// Helper Functions\r\n////////////////////////////////////////////////////////\r\n\r\nconst checkColor = (vote) => {\r\n  if (vote >= 8) {\r\n    return \"green\";\r\n  } else if (vote > 5) {\r\n    return \"orange\";\r\n  } else {\r\n    return \"red\";\r\n  }\r\n};\r\n\r\nconst loadMsg = () => {\r\n  moviesContainer.insertAdjacentHTML(\r\n    \"beforeend\",\r\n    `<h6><i class=\"fas fa-spinner\"></i></h6>`\r\n  );\r\n};\r\n\r\n////////////////////////////////////////////////////////\r\n// Get Clicked Movie\r\n////////////////////////////////////////////////////////\r\n\r\nconst clickCheck = function () {\r\n  const moviesItem = document.querySelectorAll(\".movies__item\");\r\n  moviesItem.forEach((item) =>\r\n    item.addEventListener(\"click\", function (event) {\r\n      const id = item.dataset.id;\r\n      if (event.target.classList.contains(\"movies__item__img\")) {\r\n        window.scroll(0, 0);\r\n        getClickedMovie(id);\r\n      }\r\n    })\r\n  );\r\n  const btns = document.querySelectorAll(\".movies__item__fav\");\r\n  btns.forEach((btn) => {\r\n    btn.addEventListener(\"click\", function () {\r\n      const id = btn.dataset.id.toString();\r\n      btn.textContent = \"In Favorites\";\r\n      btn.setAttribute(\"disabled\", true);\r\n\r\n      if (!favItems.includes(id)) {\r\n        favItems.push(id);\r\n        fetchFavItem(id);\r\n        addToStorage(favItems);\r\n        favItemsContainer.scroll(0, 0);\r\n        if (\r\n          !favItemsContainer.classList.contains(\"fav-show\") &&\r\n          !favItemsContainer.classList.contains(\"favorites__container--show\")\r\n        ) {\r\n          favItemsContainer.classList.toggle(\"fav-show\");\r\n        }\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nconst getClickedMovie = async function (id) {\r\n  try {\r\n    const resp = await fetch(\r\n      `https://api.themoviedb.org/3/movie/${id}?api_key=53d1126a0f1a18cf2551da1519c821af`\r\n    );\r\n    const data = await resp.json();\r\n    const movie = data;\r\n    renderClickedMovie(movie);\r\n  } catch (error) {\r\n    moviesTitle.textContent = error;\r\n    moviesContainer.insertAdjacentHTML(\r\n      \"beforeend\",\r\n      `<a class=\"btn-home\" href=\"./\">Main Page</a>`\r\n    );\r\n  }\r\n};\r\n\r\n////////////////////////////////////////////////////////\r\n// Add to Favorites\r\n////////////////////////////////////////////////////////\r\n\r\nconst btnCheck = function () {\r\n  const btns = document.querySelectorAll(\".movies__item__fav\");\r\n  btns.forEach((btn) => {\r\n    if (favItems.includes(btn.dataset.id)) {\r\n      btn.textContent = \"In Favorites\";\r\n      btn.setAttribute(\"disabled\", true);\r\n    } else {\r\n      btn.textContent = \"Add to Favorites\";\r\n      btn.removeAttribute(\"disabled\");\r\n    }\r\n  });\r\n};\r\n\r\nconst addToStorage = function (favItems) {\r\n  localStorage.setItem(\"favs\", favItems);\r\n};\r\n\r\nconst getFavItems = function () {\r\n  const favItemsLC = localStorage.getItem(\"favs\");\r\n  if (favItemsLC) {\r\n    favItems = favItemsLC.split(\",\");\r\n    favItems.forEach((item) => {\r\n      fetchFavItem(item);\r\n    });\r\n  }\r\n};\r\n\r\nconst fetchFavItem = async function (id) {\r\n  try {\r\n    const resp = await fetch(\r\n      `https://api.themoviedb.org/3/movie/${id}?api_key=53d1126a0f1a18cf2551da1519c821af`\r\n    );\r\n    const data = await resp.json();\r\n    const movie = data;\r\n    renderFavItem(movie);\r\n  } catch (error) {\r\n    moviesTitle.textContent = error;\r\n    moviesContainer.insertAdjacentHTML(\r\n      \"beforeend\",\r\n      `<a class=\"btn-home\" href=\"./\">Main Page</a>`\r\n    );\r\n  }\r\n};\r\n\r\nconst renderFavItem = function (movie) {\r\n  const image = movie.poster_path;\r\n  const title = movie.title;\r\n  const id = movie.id;\r\n  favItemsContainer.insertAdjacentHTML(\r\n    \"afterbegin\",\r\n    `\r\n  <div class=\"favorites__item\" data-id=\"${id}\">\r\n  <img class=\"favorites__item__img\" src=\"${imgPath + image}\" />\r\n\r\n<div class=\"favorites__item__info\">\r\n<p>\r\n<span class=\"favorites__item__title\">${title}</span>\r\n\r\n<button class=\"favorites__item__remove-btn\" data-id=\"${id}\">Remove</button>\r\n</p>\r\n</div>\r\n\r\n  </div>\r\n  `\r\n  );\r\n  favClickCheck();\r\n};\r\n\r\nconst favClickCheck = function () {\r\n  const moviesItem = document.querySelectorAll(\".favorites__item\");\r\n  moviesItem.forEach((item) =>\r\n    item.addEventListener(\"click\", function (event) {\r\n      let id = item.dataset.id;\r\n      if (event.target.classList.contains(\"favorites__item__img\")) {\r\n        getClickedMovie(id);\r\n        window.scroll(0, 0);\r\n        favItemsContainer.classList.remove(\"favorites__container--show\");\r\n        favItemsContainer.classList.remove(\"fav-show\");\r\n      }\r\n      if (event.target.classList.contains(\"favorites__item__remove-btn\")) {\r\n        const btn = event.target;\r\n        const clickedItem = btn.parentElement.parentElement.parentElement;\r\n        id = id.toString();\r\n        favItems = favItems.filter((item) => item !== id);\r\n        addToStorage(favItems);\r\n\r\n        setTimeout(function () {\r\n          if (clickedItem.parentNode) {\r\n            favItemsContainer.removeChild(\r\n              btn.parentElement.parentElement.parentElement\r\n            );\r\n            if (!favItemsContainer.firstElementChild) {\r\n              showFav();\r\n            }\r\n          }\r\n        }, 0);\r\n\r\n        btnCheck();\r\n      }\r\n    })\r\n  );\r\n};\r\n\r\n////////////////////////////////////////////////////////\r\n// Render Clicked Movie\r\n////////////////////////////////////////////////////////\r\n\r\nconst renderClickedMovie = function (movie) {\r\n  const image = movie.poster_path;\r\n  const title = movie.title;\r\n  const vote = movie.vote_average;\r\n  const date = movie.release_date;\r\n  const plot = movie.overview;\r\n  const runtime = movie.runtime;\r\n  const imdbID = movie.imdb_id;\r\n  const genres = movie.genres;\r\n\r\n  const getGenres = function (genres) {\r\n    const genreslist = genres.map((genre) => genre.name);\r\n    return genreslist.join(\", \");\r\n  };\r\n\r\n  moviesContainer.innerHTML = \"\";\r\n  moviesTitle.textContent = \"Movie Details: \" + title;\r\n  moviesContainer.insertAdjacentHTML(\r\n    \"beforeend\",\r\n    `\r\n    <div class=\"movies__detail\">\r\n    <div class=\"movies__detail__img\">\r\n    <img src=\"${imgPath + image}\" />\r\n    </div>\r\n    <div class=\"movies__detail__info\">\r\n    <span class=\"movies__detail__genres mar-tb-05\">${getGenres(genres)}</span>\r\n    <span class=\"movies__detail__date\">Release Date: <b>${date}</b></span>\r\n    <span class=\"movies__detail__vote mar-tb-05\">Votes: <b><font style=\"color:${checkColor(\r\n      vote\r\n    )}\">${vote}</font></b></span>\r\n    <span class=\"movies__detail__runtime\">Rruntime: <b>${runtime}</b> Min</span>\r\n    <p class=\"movies__detail__plot mar-tb-1\"><b>Overview:</b></b><br>${plot}</p>\r\n\r\n    <a class=\"movies__detail__imdb-btn mar-tb-05\" target=\"_blank\" href=\"https://www.imdb.com/title/${imdbID}/\">View On IMDB</a>\r\n    \r\n    <p class=\"home-link mar-t-1\">or <a href=\"./\"><b>Return Home</b></a></p>\r\n\r\n    </div>\r\n    </div>\r\n          `\r\n  );\r\n};\r\n\r\n////////////////////////////////////////////////////////\r\n// Movie Categories\r\n////////////////////////////////////////////////////////\r\n\r\nnav.addEventListener(\"click\", function (event) {\r\n  if (event.target === popMovies) {\r\n    getMovies(apiUrl);\r\n    moviesTitle.textContent = \"Popular Movies\";\r\n    window.scroll(0, 0);\r\n  } else if (event.target === dramaMovies) {\r\n    event.preventDefault();\r\n    getMovies(dramaMoviesUrl);\r\n    moviesTitle.textContent = \"Drama Movies\";\r\n    window.scroll(0, 0);\r\n  } else if (event.target === highGrossMovies) {\r\n    event.preventDefault();\r\n    getMovies(highGrossUrl);\r\n    moviesTitle.textContent = \"High Grossing Movies\";\r\n    window.scroll(0, 0);\r\n  }\r\n});\r\n\r\n////////////////////////////////////////////////////////\r\n// Searching Movies\r\n////////////////////////////////////////////////////////\r\n\r\nsearchForm.addEventListener(\"submit\", (event) => {\r\n  const searchTerm = searchInput.value;\r\n  event.preventDefault();\r\n  if (searchTerm !== \"\") {\r\n    getMovies(searchUrl + searchTerm);\r\n    moviesTitle.textContent = `Search: ${searchTerm}`;\r\n    searchInput.blur();\r\n    showSearch();\r\n  } else {\r\n    window.location.reload();\r\n  }\r\n});\r\n\r\n////////////////////////////////////////////////////////\r\nloadMsg();\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n  getMovies(apiUrl);\r\n  getFavItems();\r\n});\r\n"]}